[%- pagetitle = 'PLUGIN_SQUEEZEDSP_MODULEDESC' | string; pageicon = 'PLUGIN_SQUEEZEDSP_MODULEDESC' -%]
[%- pwd_list = BLOCK -%]/
	<a href="[% webroot %]plugins/SqueezeDSP/index.html?player=[% player | uri %]">
		[% "PLUGIN_SQUEEZEDSP_DISPLAYNAME" | string %]
	</a>
[% END -%]
[% PROCESS pageheader.html %]

<!--
	Settings page
		
	Modified by Jonathan Fox 2022
-->

<!-- Script for the model -->
<script type="text/javascript" src="/html/prototype.js"></script>
 
<!--Now let's split out the libraries and stylese-->
<link rel="stylesheet" type="text/css" href="css/sqdsp_style.css"/>
<script type="text/javascript" src="[% webroot %]plugins/SqueezeDSP/js/sqdsp_controls.js"></script>
<script type="text/javascript" src="[% webroot %]plugins/SqueezeDSP/js/sqdsp_data.js"></script>


<script>

</script>

	[% WRAPPER settingSection onmouseover="onHTMLMouseOverBody()" %]
	<!-- the style-police -->
		
	<div>
	
	<div class="bubble" id="myMessage">To use please select Squeeze DSP on Extras Menu</div>
	<Output>
	[% "PLUGIN_SQUEEZEDSP_DISPLAYNAME" | string %]  
	[% PERL %]
	my $myversion=Plugins::SqueezeDSP::Plugin->getpluginVersion();
	print ( $myversion );
	[% END %]
	</Output>
	<Output style="float: right;" id="myPlayer"></Output>
	<!--Output style="float: right;" id="myPlayerName">[% "PLAYER_NAME" | string %]</Output-->
	
	</div>
	<table style="width:100%;padding:0; display:none;" zzz_onresize="resizeContainer()">
		<tr><td>
			<div id="RestTestHost" style="margin-right:20px; height:200px; width:95%;"></div>
		</td></tr>
	</table>
<!-- for Testing Rest Calls-->
<DIV id="TEST REST">
	<!--input type ="Button" onclick="InguzGetList(LocalBuildLists)" value="Get List" >
	<input type ="Button" onclick="InguzGetSettings(LocalUpdateSettings) " value = "Get Settings" >
	<input type ="Button" onclick="LocalShowSettings() " value = "Show Settings">
	<input type ="Button" onclick="LocalsetValue()" value = "Set Value" >
	<input type ="Button" onclick="LocalSaveEQBand()" value = "Save EQ Band" >
	<input type ="Button" onclick="InguzSelectPreset()" value = "Select Preset" >
	<input type ="Button" onclick="Initialise()" value = "Initialise" >

	<input type ="Button" onclick="LocalDisplayEQ()" value="Display EQ Sliders" >
	<input type ="Button" onclick="RestTestHost.innerText = checkInguzLib();" value = "Check Inguz" >	
	<input type ="Button" onclick="control_NewPreset.className='Boring';" value = "Reset Animation" -->
</DIV>
	<!-- settings fields -->
	<!--PRESETS-->
	[% WRAPPER settingSection %]&nbsp;
	[% WRAPPER settingGroup title="PLUGIN_SQUEEZEDSP_HTML_PRESETS" %][% END %]
	<TABLE class="table-container" >
		<TR  id="control_Preset">
			<TD class="rowTitleLong"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_CHOOSE_PRESET" | string %]</a></Output></TD>
			<TD class="rowBody">
				<select class="sqdsp-select" id="sel_Preset" onchange="edt_NewPreset.value = this.value.replace('.preset.conf',''); NewFieldValue('Preset', this, true); "  >
					<option value="-">None</option>
				</select>
			</TD>
		</TR>

		<TR id="control_NewPreset">
			<TD class="rowTitleLong"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_SAVEPRESETFILE" | string %]</Output></TD>
			<TD class="rowBody">
				<input class="sqdsp-edit" id="edt_NewPreset" value="None" />								
				<input class="sqdsp-click" type="button" name="btn_NewPreset" value="Save" onclick="SetNewPreset(edt_NewPreset)" </input></TD>
		</TR>
	</TABLE>	
	[% END %]
		
	<!--Convolver Type Filters -->
	[% WRAPPER settingSection %]&nbsp;
		[% WRAPPER settingGroup title="PLUGIN_SQUEEZEDSP_HTML_FILTERS" %][% END %]
	<TABLE class="table-container" >
		<TR id="control_Filter">
			<TD class="rowTitleLong"><Output  class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_ROOMCORR" | string %]</a></Output></TD>
			<TD class="rowBody">
				<select class="sqdsp-select" id="sel_Filter" onchange="NewFieldValue('Filter', this, false)" >
					<option value="-">None</option>
				</select>
			</TD>
		</TR>

		<TR id="control_Matrix">
			<TD class="rowTitleLong"><Output  class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_MATRIX" | string %]</a></Output></TD>
			<TD class="rowBody">
				<select class="sqdsp-select" id="sel_Matrix" onchange="NewFieldValue('Matrix', this, false)" >
					<option value="-">None</option>
				</select>
			</TD>
		</TR>
	</TABLE>
	[% END %]
	
	<!--EQ Selector -->
	[% WRAPPER settingSection %]&nbsp;
		[% WRAPPER settingGroup title="PLUGIN_SQUEEZEDSP_CHOOSE_EQSETTINGS" %][% END %]
	<TABLE class="table-container"   >
		<TR  id="control_Bands">
			<TD class="rowTitle">

				<label for="val_Bands">[% "PLUGIN_SQUEEZEDSP_EQUALIZER" | string %]</label>
			</TD>
				<TD><input type="radio" name="val_Bands" value="2"  onclick="NewFieldValue ('Bands', this, true);">&emsp;<Output> 2 [% "PLUGIN_SQUEEZEDSP_NBAND" | string %]</Output></input></TD>
				<TD><input type="radio" name="val_Bands" value="3"  onclick="NewFieldValue ('Bands', this, true);">&emsp;<Output>   3 [% "PLUGIN_SQUEEZEDSP_NBAND" | string %]</Output></input></TD>
				<TD><input type="radio" name="val_Bands" value="5"  onclick="NewFieldValue ('Bands', this, true);">&emsp;<Output>   5 [% "PLUGIN_SQUEEZEDSP_NBAND" | string %]</Output></input></TD>
				<TD><input type="radio" name="val_Bands" value="9"  onclick="NewFieldValue ('Bands', this, true);"> &emsp;<Output>   9 [% "PLUGIN_SQUEEZEDSP_NBAND" | string %]</Output></input></TD>
				<TD><input type="radio" name="val_Bands" value="15" onclick="NewFieldValue ('Bands', this, true);"> &emsp;<Output>  15 [% "PLUGIN_SQUEEZEDSP_NBAND" | string %]</Output></input></TD>
				<TD><input type="radio" name="val_Bands" value="31" onclick="NewFieldValue ('Bands', this, true);"> &emsp;<Output>  31 [% "PLUGIN_SQUEEZEDSP_NBAND" | string %]</Output></input></TD>
			
			
		</TR>
	</TABLE>
	[% END %]
	
	<!--Equalizer -->
	[% WRAPPER settingSection %]&nbsp;
		[% WRAPPER settingGroup title="PLUGIN_SQUEEZEDSP_HTML_EQ" %][% END %]
		<TABLE id="control_EQ" class="table-container" >
			<!-- This stuff will all be replaced by new EQ -->	
		</TABLE>
	[% END %]
	
	<!--Balance / Quietness etc -->
	[% WRAPPER settingSection %]&nbsp;
		[% WRAPPER settingGroup title="PLUGIN_SQUEEZEDSP_HTML_AUDIO" %][% END %]
	<TABLE class="table-container" >
		<TR id="control_Flatness" inc="1">
			 <TD class="rowTitle"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_FLATNESS" | string %]</a></Output></TD>
			 <TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="0" max="10" step="1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="Flatness" ></Input>
				<output id="FlatnessBubble" class="bubble" ></output></TD>
		
				
			<TD class="rowSuffix"><Output id="val_Flatness"></Output>&nbsp;</TD>
			
		</TR>
		<TR id="control_Quietness" inc="1">
			<TD class="rowTitle"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_QUIETNESS" | string %]</a></Output></TD>
			 <TD class="Slide">
				<output id="QuietnessBubble" class="bubble" ></output>
				<input  class="range" type="range"   orient="horizontal"  min="0" max="10" step="1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="Quietness" ></Input>
				
			 </TD>
			 	
			 <TD class="rowSuffix"><Output id="val_Quietness"></Output>&nbsp;</TD>
		</TR>

		<TR id="control_Balance" inc="0.1">
			<TD class="rowTitle"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_BALANCE" | string %]</a></Output></TD>
			<TD class="Slide">
					<input  class="range" type="range"   orient="horizontal"  min="-9" max="9" step="0.1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="Balance" ></Input>
					<output id="BalanceBubble" class="bubble" ></output>
			 </TD>
			<TD class="rowSuffix"><Output  id="val_Balance"></span>&nbsp;[% "PLUGIN_SQUEEZEDSP_DECIBELS" | string %]</TD>
		</TR>

		<TR id="control_Width" inc="0.1">
			<TD class="rowTitle"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_WIDTH" | string %]</a></Output></TD>
			
			 <TD class="Slide">
					<input  class="range" type="range"   orient="horizontal"  min="-9" max="9" step="0.1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="Width" ></Input>
					<output id="WidthBubble" class="bubble" ></output>
			</TD>	
			 <TD class="rowSuffix"><Output id="val_Width"></Output>&nbsp;[% "PLUGIN_SQUEEZEDSP_DECIBELS" | string %]</TD>
		</TR>
	</TABLE>
	[% END %]

	<!--Advanced -->
	[% WRAPPER settingSection %]&nbsp;
		[% WRAPPER settingGroup title="PLUGIN_SQUEEZEDSP_HTML_ADVANCED" %][% END %]
	<TABLE class="table-container" >
	 <TR id="control_Skew">  
		
	    <TD class="rowTitle"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_SKEW" | string %]</a></Output> </TD >
		
		<TD class="Slide">
			<input  class="range" type="range"   orient="horizontal"  min="-100" max="100" step="1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="Skew" ></Input>
			<output id="SkewBubble" class="bubble" ></output>
		</TD>
		<TD class="rowSuffix"><Output id="val_Skew" ></Output>&nbsp;[% "PLUGIN_SQUEEZEDSP_SAMPLES" | string %]</TD >
	 </TR>
	 </Table>
	<TABLE class="table-container" >
	<TR id="control_Amb">
			<TD class="rowTitleLong"><Output class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_AMBI_DECODE" | string %]</a></Output></TD>
			<TD class="rowBody">
				<select class="sqdsp-select" id="sel_Amb"  onchange= "NewFieldValue('Amb', this, false); SetAmb( this)" >
					<option value="UHJ">[% "PLUGIN_SQUEEZEDSP_AMBI_UHJ" | string %]</option>
					<option value="Blumlein">[% "PLUGIN_SQUEEZEDSP_AMBI_BLUMLEIN" | string %]</option>
					<option value="Crossed">[% "PLUGIN_SQUEEZEDSP_AMBI_CARDIOID" | string %]</option>
<!--
					<option value="Crossed+jW">[% "PLUGIN_SQUEEZEDSP_AMBI_CARDIOID_PLUSJW" | string %]</option>
-->
				</select>
			</TD>
		</TR>
	</TABLE>
	<TABLE class="table-container" >
		<TR id="control_AmbAngle" inc="5" style="display:none">
			<TD class="rowTitle"><Output  class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_AMBI_CARDIOID_ANGLE" | string %]</Output> </TD >
			<TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="45" max="150" step="5" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="AmbAngle" ></Input>
				<output id="AmbAngleBubble" class="bubble" ></output>
			</TD>
		
		<TD class="rowSuffix"><Output id="val_AmbAngle"></Output>&nbsp;[% "PLUGIN_SQUEEZEDSP_DEGREES" | string %]
			</TD >
		</TR>
		<TR id="control_AmbDirect" inc="0.1" style="display:none">
			<TD class="rowTitle"><Output  class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_AMBI_CARDIOID_DIRECT" | string %]</Output> </TD >
			<TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="0" max="1" step="0.1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="AmbDirect" ></Input>
				<output id="AmbDirectBubble" class="bubble" ></output>
			</TD>
			
			<TD class="rowSuffix"><Output id="val_AmbDirect"></Output>&nbsp;
			</TD >
		</TR>

		<TR id="control_AmbjW" inc="0.05" style="display:none">
			<TD class="rowTitle"><Output  class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_AMBI_CARDIOID_JW" | string %]</Output> </TD >
			<TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="0" max="1" step="0.05" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="AmbjW" ></Input>
				<output id="AmbjWBubble" class="bubble" ></output>
			</TD>
			<TD class="rowSuffix"><Output id="val_AmbjW"></Output>&nbsp;
			</TD >
		</TR>

		<TR id="control_AmbRotateZ" inc="1">
			<TD class="rowTitle"><Output  class="songInfoTitle">[% "PLUGIN_SQUEEZEDSP_AMBI_ROTATION" | string %]</Output> </TD >
			<TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="-90" max="90" step="1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="AmbRotateZ" ></Input>
				<output id="AmbRotateZBubble" class="bubble" ></output>
			</TD>
			<TD class="rowSuffix"><Output id="val_AmbRotateZ"></Output>&nbsp;[% "PLUGIN_SQUEEZEDSP_DEGREES" | string %]&nbsp;-&nbsp;[% "PLUGIN_SQUEEZEDSP_AMBI_ROTATION_Z" | string %]
			</TD >
		</TR>
		<TR id="control_AmbRotateY" inc="1">
			<TD class="rowTitle"><Output  class="songInfoTitle"></Output> </TD >
			<TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="-90" max="90" step="1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="AmbRotateY" ></Input>
				<output id="AmbRotateYBubble" class="bubble" ></output>
			</TD>
			<TD class="rowSuffix"><Output id="val_AmbRotateY"></Output>&nbsp;[% "PLUGIN_SQUEEZEDSP_DEGREES" | string %]&nbsp;-&nbsp;[% "PLUGIN_SQUEEZEDSP_AMBI_ROTATION_Y" | string %]
			</TD >
		</TR>
		<TR id="control_AmbRotateX" inc="1">
			<TD class="rowTitle"><Output  class="songInfoTitle"></Output> </TD >
			<TD class="Slide">
				<input  class="range" type="range"   orient="horizontal"  min="-90" max="90" step="1" value="0" onpointerdown="showBubble(this)" onchange="iSlide(this)" id="AmbRotateX" ></Input>
				<output id="AmbRotateXBubble" class="bubble" ></output>
			</TD>
			<TD class="rowSuffix"><Output id="val_AmbRotateX"></Output>&nbsp;[% "PLUGIN_SQUEEZEDSP_DEGREES" | string %]&nbsp;-&nbsp;[% "PLUGIN_SQUEEZEDSP_AMBI_ROTATION_X" | string %]
			</TD >
		</TR>
	</TABLE>	
	[% END %]


	<!-- end of page -->
	[% END %]

<script>

myPlayer.value = playerid;

window.setTimeout( function() {
	Initialise();
	GetCurrentPlayerSettings();
},500);


</script>

[% PROCESS pagefooter.html %]
